% Direct path as known facts
r((1..3,0)).

1{ r((1,2,0)) ; r((2,3,0)) ; r((3,1,0)) }2.

% Indirect path generated by route announcements from a neighbor
r((1,2,0)) :- b((2,0)).
r((2,3,0)) :- b((3,0)).
r((3,1,0)) :- b((1,0)).

% Ranking function of the permitted paths
b((1,0)) :- r((1,0)), not r((1,2,0)).
b((1,2,0)) :- r((1,2,0)).

b((2,0)) :- r((2,0)), not r((2,3,0)).
b((2,3,0)) :- r((2,3,0)).

b((3,0)) :- r((3,0)), not r((3,1,0)).
b((3,1,0)) :- r((3,1,0)).

% Constraints to ensure only one permitted path can be selected as the best path
:- b((1,2,0)), b((1,0)).
:- b((2,3,0)), b((2,0)).
:- b((3,1,0)), b((3,0)).
